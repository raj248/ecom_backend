import{t as O,l as U,r as h,S as K,x as Q,e as V,j as e,m as N}from"./index-BmZ_dwCv.js";import{B as j}from"./button-4tHrV-ob.js";import{C as $,a as z}from"./card-z1qiUGvD.js";import{C as G,b as J}from"./ProductServices-afE79VKB.js";import{T as W,a as X,b as Y,c as Z,d as o}from"./table-DqTgYDcX.js";import{u as I,h as ee,g as te,e as se,f as re}from"./Layout-B1bU_74f.js";import{u as ae}from"./useFilter-_rWokXMj.js";import{u as ie,M as le}from"./DrawerButton-Cgm6zT_g.js";import{L as oe}from"./Loading-BUtodYRD.js";import{N as ne}from"./NotFound-DPkmTFlo.js";import{B as ce,C as me}from"./ShowHideButton-CM1A-hEd.js";import{D as de}from"./EditDeleteButton-DWncACV1.js";import{P as xe}from"./PageTitle-LqzkoK1q.js";import{C as he,a as pe}from"./CategoryTable-CYp9-mIJ.js";import{A as ge}from"./AnimatedContent-BNKJlQXC.js";import"./index-C148XJoK.js";import"./index-CWe8m2Sk.js";import"./useDisableForDemo-CWmzrrYY.js";import"./CouponServices-DlRCOaul.js";import"./CurrencyServices-CGhkZaP1.js";import"./Tooltip-Bb6l2jS1.js";import"./floating-ui.dom-BM6icrOT.js";import"./SelectLanguageTwo-D8KAIgW8.js";import"./spinner-CkndCogW.js";import"./ParentCategory-gD9tabZx.js";import"./useAsync-xcASmSVa.js";import"./input-C0BdUGB3.js";import"./select-B6txXpwi.js";import"./Combination-v4s5Rmjm.js";import"./tslib.es6-BGws65QO.js";import"./index.esm-DazwP4qc.js";import"./LabelArea-CDILq1N9.js";import"./label-C6IWixiq.js";import"./SwitchToggle-BjyUJm8q.js";import"./index.prod-DYWWLFcb.js";import"./textarea-CEbUnO4R.js";import"./AdminServices-LtusNjKA.js";import"./InputArea-l9xTjbBj.js";import"./Uploader-CWHO3hsY.js";import"./_commonjs-dynamic-modules-dt42qxfv.js";import"./useTranslationValue-BbCbvZPg.js";const at=()=>{const{id:p}=O(),{t:r}=U(),[g,v]=h.useState([]),[f,A]=h.useState([]),{lang:fe}=h.useContext(K),{open:k,setOpen:F,selectedId:C,selectedIds:s,isCheckAll:P,toggleDrawer:D,handleSelectAll:S}=Q(),{title:B,handleDeleteMany:M,handleUpdateMany:E}=ie(),{data:c,error:y,isFetched:b,isLoading:m}=V({queryKey:["categories"],queryFn:()=>J.getAllCategory(),staleTime:600*1e3,gcTime:900*1e3}),{showingTranslateValue:L}=I();h.useEffect(()=>{var T,w;const i=(t,n,l=[])=>{for(let a of n){if(a._id===t)return l.concat(a);const x=i(t,a==null?void 0:a.children,l==null?void 0:l.concat(a));if(x)return x}},d=(t,n)=>{var l;return t._id===n?t:(l=t==null?void 0:t.children)==null?void 0:l.reduce((a,x)=>a??d(x,n),void 0)};if(!m){const t=d(c[0],p),n=i(p,(T=c[0])==null?void 0:T.children);((w=t==null?void 0:t.children)==null?void 0:w.length)>0&&(v(t==null?void 0:t.children),A(n))}},[p,m,c,g]);const{dataTable:R,serviceData:u,totalResults:_,resultsPerPage:q,handleChangePage:H}=ae(g);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between py-4 lg:py-8 gap-4 lg:gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(xe,{children:r("CategoryPageTitle")}),e.jsx("div",{className:"flex items-center py-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(N,{to:"/categories",children:r("Categories")})}),f==null?void 0:f.map((i,d)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx(ee,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-emerald-500 font-semibold ",children:e.jsx(N,{to:`/categories/${i._id}`,children:L(i==null?void 0:i.name)})})]},d+1))]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-row gap-2 lg:ml-4",children:[e.jsxs(j,{onClick:D,variant:"create",children:[e.jsx("span",{className:"mr-3",children:e.jsx(te,{})}),r("AddCategory")]}),e.jsxs(j,{disabled:(s==null?void 0:s.length)<1,onClick:()=>E(s),variant:"bulkAction",children:[e.jsx(se,{}),r("BulkAction")]}),e.jsxs(j,{disabled:(s==null?void 0:s.length)<1,onClick:()=>M(s),variant:"delete",children:[e.jsx("span",{className:"mr-3",children:e.jsx(re,{})}),r("Delete")]})]}),e.jsx(de,{category:!0,open:k,title:B,id:C,onOpenChange:()=>F(!1),ids:(s==null?void 0:s.length)>0?s:null}),e.jsx(ce,{title:"Child Categories",ids:s,data:b?c:[]}),e.jsx(le,{children:e.jsx(he,{id:C,data:b?c:[]})})]}),e.jsx(ge,{children:e.jsx($,{className:"min-w-0 shadow-sm overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsx(z,{className:"p-5",children:m?e.jsx(oe,{loading:m}):y?e.jsx("span",{className:"text-center mx-auto text-red-500",children:y}):(u==null?void 0:u.length)!==0?e.jsxs("div",{children:[e.jsx(W,{className:"mb-8",children:e.jsxs(X,{children:[e.jsx(Y,{children:e.jsxs(Z,{children:[e.jsx(o,{children:e.jsx(me,{type:"checkbox",name:"selectAll",id:"selectAll",isChecked:P,handleSelect:()=>S(g)})}),e.jsx(o,{children:r("catIdTbl")}),e.jsx(o,{children:r("catIconTbl")}),e.jsx(o,{children:r("Name")}),e.jsx(o,{children:r("Description")}),e.jsx(o,{className:"text-center",children:r("catPublishedTbl")}),e.jsx(o,{className:"text-right",children:r("catActionsTbl")})]})}),e.jsx(pe,{categories:R,showChild:!1})]})}),e.jsx("div",{children:e.jsx(G,{resultsperpage:q,totalresults:_,onChange:H,label:"Table navigation"})})]}):e.jsx(ne,{title:"Sorry, There are no categories right now."})})})})]})};export{at as default};
