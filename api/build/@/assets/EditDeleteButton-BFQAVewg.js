import{r as i,j as n,d as ge,x as me,S as pe,u as xe,l as q,y as ve,L as U,m as he}from"./index-lrQuldHs.js";import{d as De,u as P,P as b,e as Ne,c as y,B as T,n as I,b as ye}from"./button-rh3FTULs.js";import{u as Ce,a as F,c as C,P as be,h as je,R as Re,b as we,F as Ee,D as Ae}from"./Combination-DMBpnunk.js";import{a as B,c as Pe,b as Me}from"./index-BOuINoA5.js";import{f as K,k as _e,e as G}from"./Layout-zjBccTHe.js";import{s as Se}from"./spinner-CkndCogW.js";import{A as Oe}from"./AdminServices-B69j88RY.js";import{P as z,b as L,e as Te,A as R}from"./ProductServices-DkrntO0G.js";import{C as H}from"./CouponServices-DZWPN_Z6.js";import{C as V}from"./CurrencyServices-BtWGRbQW.js";import{u as Ie}from"./useDisableForDemo-dHOka9Cq.js";import{T as w}from"./Tooltip-D68gOM7t.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Le=De("x",Fe);function ke(e,t){return i.useReducer((o,r)=>t[o][r]??o,e)}var M=e=>{const{present:t,children:o}=e,r=Qe(t),a=typeof o=="function"?o({present:r.isPresent}):i.Children.only(o),s=P(r.ref,We(a));return typeof o=="function"||r.isPresent?i.cloneElement(a,{ref:s}):null};M.displayName="Presence";function Qe(e){const[t,o]=i.useState(),r=i.useRef(null),a=i.useRef(e),s=i.useRef("none"),c=e?"mounted":"unmounted",[u,m]=ke(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const f=E(r.current);s.current=u==="mounted"?f:"none"},[u]),B(()=>{const f=r.current,d=a.current;if(d!==e){const g=s.current,h=E(f);e?m("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?m("UNMOUNT"):m(d&&g!==h?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,m]),B(()=>{if(t){let f;const d=t.ownerDocument.defaultView??window,x=h=>{const S=E(r.current).includes(CSS.escape(h.animationName));if(h.target===t&&S&&(m("ANIMATION_END"),!a.current)){const O=t.style.animationFillMode;t.style.animationFillMode="forwards",f=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=O)})}},g=h=>{h.target===t&&(s.current=E(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{d.clearTimeout(f),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else m("ANIMATION_END")},[t,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:i.useCallback(f=>{r.current=f?getComputedStyle(f):null,o(f)},[])}}function E(e){return(e==null?void 0:e.animationName)||"none"}function We(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}var _="Dialog",[Z,bt]=Pe(_),[$e,v]=Z(_),X=e=>{const{__scopeDialog:t,children:o,open:r,defaultOpen:a,onOpenChange:s,modal:c=!0}=e,u=i.useRef(null),m=i.useRef(null),[f,d]=Ce({prop:r,defaultProp:a??!1,onChange:s,caller:_});return n.jsx($e,{scope:t,triggerRef:u,contentRef:m,contentId:F(),titleId:F(),descriptionId:F(),open:f,onOpenChange:d,onOpenToggle:i.useCallback(()=>d(x=>!x),[d]),modal:c,children:o})};X.displayName=_;var Y="DialogTrigger",J=i.forwardRef((e,t)=>{const{__scopeDialog:o,...r}=e,a=v(Y,o),s=P(t,a.triggerRef);return n.jsx(b.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":W(a.open),...r,ref:s,onClick:C(e.onClick,a.onOpenToggle)})});J.displayName=Y;var k="DialogPortal",[Ue,ee]=Z(k,{forceMount:void 0}),te=e=>{const{__scopeDialog:t,forceMount:o,children:r,container:a}=e,s=v(k,t);return n.jsx(Ue,{scope:t,forceMount:o,children:i.Children.map(r,c=>n.jsx(M,{present:o||s.open,children:n.jsx(be,{asChild:!0,container:a,children:c})}))})};te.displayName=k;var A="DialogOverlay",ne=i.forwardRef((e,t)=>{const o=ee(A,e.__scopeDialog),{forceMount:r=o.forceMount,...a}=e,s=v(A,e.__scopeDialog);return s.modal?n.jsx(M,{present:r||s.open,children:n.jsx(Ge,{...a,ref:t})}):null});ne.displayName=A;var Be=Ne("DialogOverlay.RemoveScroll"),Ge=i.forwardRef((e,t)=>{const{__scopeDialog:o,...r}=e,a=v(A,o);return n.jsx(Re,{as:Be,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(b.div,{"data-state":W(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),N="DialogContent",oe=i.forwardRef((e,t)=>{const o=ee(N,e.__scopeDialog),{forceMount:r=o.forceMount,...a}=e,s=v(N,e.__scopeDialog);return n.jsx(M,{present:r||s.open,children:s.modal?n.jsx(ze,{...a,ref:t}):n.jsx(He,{...a,ref:t})})});oe.displayName=N;var ze=i.forwardRef((e,t)=>{const o=v(N,e.__scopeDialog),r=i.useRef(null),a=P(t,o.contentRef,r);return i.useEffect(()=>{const s=r.current;if(s)return je(s)},[]),n.jsx(ae,{...e,ref:a,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C(e.onCloseAutoFocus,s=>{var c;s.preventDefault(),(c=o.triggerRef.current)==null||c.focus()}),onPointerDownOutside:C(e.onPointerDownOutside,s=>{const c=s.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&s.preventDefault()}),onFocusOutside:C(e.onFocusOutside,s=>s.preventDefault())})}),He=i.forwardRef((e,t)=>{const o=v(N,e.__scopeDialog),r=i.useRef(!1),a=i.useRef(!1);return n.jsx(ae,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var c,u;(c=e.onCloseAutoFocus)==null||c.call(e,s),s.defaultPrevented||(r.current||(u=o.triggerRef.current)==null||u.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var m,f;(m=e.onInteractOutside)==null||m.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=s.target;((f=o.triggerRef.current)==null?void 0:f.contains(c))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),ae=i.forwardRef((e,t)=>{const{__scopeDialog:o,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,...c}=e,u=v(N,o),m=i.useRef(null),f=P(t,m);return we(),n.jsxs(n.Fragment,{children:[n.jsx(Ee,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:n.jsx(Ae,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":W(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Ve,{titleId:u.titleId}),n.jsx(Ke,{contentRef:m,descriptionId:u.descriptionId})]})]})}),Q="DialogTitle",re=i.forwardRef((e,t)=>{const{__scopeDialog:o,...r}=e,a=v(Q,o);return n.jsx(b.h2,{id:a.titleId,...r,ref:t})});re.displayName=Q;var se="DialogDescription",ie=i.forwardRef((e,t)=>{const{__scopeDialog:o,...r}=e,a=v(se,o);return n.jsx(b.p,{id:a.descriptionId,...r,ref:t})});ie.displayName=se;var le="DialogClose",ce=i.forwardRef((e,t)=>{const{__scopeDialog:o,...r}=e,a=v(le,o);return n.jsx(b.button,{type:"button",...r,ref:t,onClick:C(e.onClick,()=>a.onOpenChange(!1))})});ce.displayName=le;function W(e){return e?"open":"closed"}var ue="DialogTitleWarning",[jt,de]=Me(ue,{contentName:N,titleName:Q,docsSlug:"dialog"}),Ve=({titleId:e})=>{const t=de(ue),o=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&(document.getElementById(e)||console.error(o))},[o,e]),null},qe="DialogDescriptionWarning",Ke=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${de(qe).contentName}}.`;return i.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Ze=X,Xe=J,Ye=te,Je=ne,et=oe,tt=re,nt=ie,fe=ce;const ot=i.forwardRef(({...e},t)=>n.jsx(Ze,{ref:t,"data-slot":"dialog",...e}));i.forwardRef(({...e},t)=>n.jsx(Xe,{ref:t,"data-slot":"dialog-trigger",...e}));const at=i.forwardRef(({...e},t)=>n.jsx(Ye,{ref:t,"data-slot":"dialog-portal",...e}));i.forwardRef(({...e},t)=>n.jsx(fe,{ref:t,"data-slot":"dialog-close",...e}));const rt=i.forwardRef(({className:e,...t},o)=>n.jsx(Je,{ref:o,"data-slot":"dialog-overlay",className:y("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})),st=i.forwardRef(({className:e,children:t,...o},r)=>n.jsxs(at,{children:[n.jsx(rt,{}),n.jsxs(et,{ref:r,"data-slot":"dialog-content",className:y("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o,children:[t,n.jsxs(fe,{className:"data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-1 right-1 border px-2 rounded-md border-rose-300 py-1 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[n.jsx(Le,{}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})),it=i.forwardRef(({className:e,...t},o)=>n.jsx("div",{ref:o,"data-slot":"dialog-header",className:y("flex flex-col gap-2 text-center sm:text-left",e),...t})),lt=i.forwardRef(({className:e,...t},o)=>n.jsx("div",{ref:o,"data-slot":"dialog-footer",className:y("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})),ct=i.forwardRef(({className:e,...t},o)=>n.jsx(tt,{ref:o,"data-slot":"dialog-title",className:y("text-lg leading-none font-semibold dark:text-gray-300",e),...t}));i.forwardRef(({className:e,...t},o)=>n.jsx(nt,{ref:o,"data-slot":"dialog-description",className:y("text-muted-foreground text-sm",e),...t}));const ut=({id:e,ids:t,open:o,title:r,category:a,useParamId:s,onOpenChange:c})=>{const{setSelectedId:u,setSelectedIds:m}=me(),{setIsUpdate:f}=i.useContext(pe),d=xe(),{t:x}=q(),g=ve(),[h,D]=i.useState(!1),{handleDisableForDemo:S}=Ie(),O=async()=>{var j,$;if(!S())try{if(D(!0),d.pathname==="/products")if(t){const l=await z.deleteManyProducts({ids:t});p(l),g.invalidateQueries(["products"])}else{const l=await z.deleteProduct(e);p(l),g.invalidateQueries(["products"])}if(d.pathname==="/coupons")if(t){console.log("will need to delete multiple",t);const l=await H.deleteManyCoupons({ids:t});p(l),g.invalidateQueries(["coupons"])}else{console.log("will need to delete single");const l=await H.deleteCoupon(e);p(l),g.invalidateQueries(["coupons"])}if(d.pathname==="/categories"||a)if(t){const l=await L.deleteManyCategory({ids:t});p(l),g.invalidateQueries(["categories"])}else{if(e===void 0||!e)return I("Please select a category first!"),D(!1),c();const l=await L.deleteCategory(e);p(l),g.invalidateQueries(["categories"])}else if(d.pathname===`/categories/${s}`||a){if(e===void 0||!e)return I("Please select a category first!"),D(!1),c();const l=await L.deleteCategory(e);p(l),g.invalidateQueries(["categories"])}if(d.pathname==="/customers"){const l=await Te.deleteCustomer(e);p(l),g.invalidateQueries(["customers"])}if(d.pathname==="/attributes")if(t){const l=await R.deleteManyAttribute({ids:t});p(l),g.invalidateQueries(["attributes"])}else{const l=await R.deleteAttribute(e);p(l),g.invalidateQueries(["attributes"])}if(d.pathname===`/attributes/${d.pathname.split("/")[2]}`)if(t){const l=await R.deleteManyChildAttribute({id:d.pathname.split("/")[2],ids:t});p(l),g.invalidateQueries(["attribute"])}else{const l=await R.deleteChildAttribute({id:e,ids:d.pathname.split("/")[2]});p(l),g.invalidateQueries(["attribute"])}if(d.pathname==="/our-staff"){const l=await Oe.deleteStaff(e);p(l),g.invalidateQueries(["our-staff"])}if(d.pathname==="/languages")if(t){const l=await U.deleteManyLanguage({ids:t});p(l),g.invalidateQueries(["languages"])}else{const l=await U.deleteLanguage(e);p(l),g.invalidateQueries(["languages"])}if(d.pathname==="/currencies")if(t){const l=await V.deleteManyCurrency({ids:t});p(l),g.invalidateQueries(["currencies"])}else{const l=await V.deleteCurrency(e);p(l),g.invalidateQueries(["currencies"])}}catch(l){I(l?($=(j=l==null?void 0:l.response)==null?void 0:j.data)==null?void 0:$.message:l==null?void 0:l.message),m([]),c(),D(!1)}},p=j=>{f(!0),ye(j.message),m([]),u(),c(),D(!1)};return o?n.jsx(ot,{open:o,onOpenChange:c,children:n.jsxs(st,{className:"text-center",children:[n.jsx(it,{children:n.jsx(ct,{className:"sr-only",children:"Delete Confirmation"})}),n.jsx("span",{className:"flex justify-center text-3xl mb-6 text-red-500",children:n.jsx(K,{})}),n.jsxs("h2",{className:"text-lg font-medium mb-2",children:[x("DeleteModalH2")," ",n.jsx("span",{className:"text-red-500",children:r}),"?"]}),n.jsx("p",{className:"text-sm",children:x("DeleteModalPtag")}),n.jsxs(lt,{children:[n.jsx(T,{variant:"outline",onClick:c,children:x("modalKeepBtn")}),n.jsx("div",{className:"flex justify-end",children:h?n.jsxs(T,{disabled:!0,type:"button",children:[n.jsx("img",{src:Se,alt:"Loading",width:20,height:10})," ",n.jsx("span",{className:"font-serif ml-2 font-light",children:x("Processing")})]}):n.jsx(T,{onClick:O,variant:"delete",children:x("modalDeletBtn")})})]})]})}):null},Rt=ge.memo(ut),wt=({id:e,title:t,parent:o,children:r,selectedIds:a,handleUpdate:s,handleModalOpen:c})=>{const{t:u}=q();return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex justify-end text-right",children:[(r==null?void 0:r.length)>0?n.jsxs(n.Fragment,{children:[n.jsx(he,{to:`/categories/${o==null?void 0:o._id}`,className:"p-2 cursor-pointer text-gray-400 hover:text-emerald-600 focus:outline-none",children:n.jsx(w,{id:"view",Icon:_e,title:u("View"),bgColor:"#10B981"})}),n.jsx("button",{disabled:(a==null?void 0:a.length)>0,onClick:()=>s(e),className:"p-2 cursor-pointer text-gray-400 hover:text-emerald-600 focus:outline-none",children:n.jsx(w,{id:"edit",Icon:G,title:u("Edit"),bgColor:"#10B981"})})]}):n.jsx("button",{disabled:(a==null?void 0:a.length)>0,onClick:()=>s(e),className:"p-2 cursor-pointer text-gray-400 hover:text-emerald-600 focus:outline-none",children:n.jsx(w,{id:"edit",Icon:G,title:u("Edit"),bgColor:"#10B981"})}),n.jsx("button",{disabled:(a==null?void 0:a.length)>0,onClick:()=>c(e,t),className:"p-2 cursor-pointer text-gray-400 hover:text-red-600 focus:outline-none",children:n.jsx(w,{id:"delete",Icon:K,title:u("Delete"),bgColor:"#EF4444"})})]})})};export{Rt as D,wt as E,ot as a,st as b,it as c,ct as d,lt as e};
