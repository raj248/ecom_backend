import{u as F,l as L,r as i,S as T,j as e}from"./index-lrQuldHs.js";import{B as m}from"./button-rh3FTULs.js";import{I as V}from"./input-DxgA4gbo.js";import{e as s}from"./exportFromJSON-BvevaQwb.js";import{G as y,w as I,x as B,y as M,z as P,g as A}from"./Layout-zjBccTHe.js";import{s as O}from"./spinner-CkndCogW.js";import{P as j}from"./ProductServices-DkrntO0G.js";function H(a){return y({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"}},{tag:"path",attr:{d:"M8.646 6.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9 8.646 7.354a.5.5 0 0 1 0-.708zm-1.292 0a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L5.707 9l1.647-1.646a.5.5 0 0 0 0-.708z"}}]})(a)}function J(a){return y({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.5 5.5a.5.5 0 0 0-1 0v.634l-.549-.317a.5.5 0 1 0-.5.866L6 7l-.549.317a.5.5 0 1 0 .5.866l.549-.317V8.5a.5.5 0 1 0 1 0v-.634l.549.317a.5.5 0 1 0 .5-.866L8 7l.549-.317a.5.5 0 1 0-.5-.866l-.549.317V5.5zm-2 4.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 2a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"}},{tag:"path",attr:{d:"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"}}]})(a)}const Q=({title:a,totalDoc:u,filename:x,exportData:r,isDisabled:N,handleSelectFile:v,handleRemoveSelectFile:b,handleUploadMultiple:w})=>{const t=F(),{t:p}=L(),c=i.useRef(),[h,o]=i.useState(!1),[f,C]=i.useState(!1),{loading:k}=i.useContext(T),[d,l]=i.useState({name:"",status:!1}),S=()=>{t.pathname==="/products"&&(l({name:"csv",status:!0}),j.getAllProducts({page:1,limit:u,category:null,title:null,price:0}).then(n=>{o(!1),l({name:"",status:!1}),s({data:n.products,fileName:"products",exportType:s.types.csv})}).catch(n=>{l({name:"",status:!1}),o(!1)})),t.pathname==="/categories"&&s({data:r,fileName:"categories",exportType:s.types.csv}),t.pathname==="/attributes"&&s({data:r,fileName:"attributes",exportType:s.types.csv}),t.pathname==="/coupons"&&s({data:r,fileName:"coupons",exportType:s.types.csv}),t.pathname==="/customers"&&s({data:r,fileName:"customers",exportType:s.types.csv})},E=()=>{t.pathname==="/products"&&(l({name:"json",status:!0}),j.getAllProducts({page:1,limit:u,category:null,title:null,price:0}).then(n=>{o(!1),l({name:"json",status:!0}),s({data:n.products,fileName:"products",exportType:s.types.json})}).catch(n=>{o(!1),l({name:"json",status:!0})})),t.pathname==="/categories"&&s({data:r,fileName:"categories",exportType:s.types.json}),t.pathname==="/attributes"&&s({data:r,fileName:"attributes",exportType:s.types.json}),t.pathname==="/coupons"&&s({data:r,fileName:"coupons",exportType:s.types.json}),t.pathname==="/customers"&&s({data:r,fileName:"customers",exportType:s.types.json})};return i.useEffect(()=>{const n=z=>{var g;(g=c==null?void 0:c.current)!=null&&g.contains(z.target)||o(!1)};document.addEventListener("mousedown",n)},[c]),e.jsxs("div",{className:" lg:flex md:flex flex-grow-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{ref:c,className:"lg:flex-1 md:flex-1 sm:flex-none",children:[(a==="Products"||a==="Attribute"||a==="Extra"||a==="Coupon"||a==="Customers"||a==="Categories")&&e.jsxs(m,{onClick:()=>{o(!h)},variant:"outline",children:[e.jsx(I,{className:"size-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:p("Export")})]}),h&&e.jsxs("ul",{className:"origin-top-left absolute  w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 focus:outline-none z-40",style:{},children:[e.jsx("li",{className:"justify-between font-serif font-medium py-2 pl-4 transition-colors duration-150 hover:bg-gray-100 text-gray-500 hover:text-emerald-500 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200",children:e.jsx("button",{type:"button",onClick:S,className:"focus:outline-none",children:e.jsxs("span",{className:"flex items-center text-sm",children:[e.jsx(J,{className:"w-4 h-4 mr-3","aria-hidden":"true"}),e.jsxs("span",{children:["Export to CSV",d.name==="csv"&&d.status&&"...."]})]})})}),e.jsx("li",{className:"justify-between font-serif font-medium py-2 pl-4 transition-colors duration-150 hover:bg-gray-100 text-gray-500 hover:text-emerald-500 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200",children:e.jsx("button",{type:"button",className:"focus:outline-none",onClick:E,children:e.jsxs("span",{className:"flex items-center text-sm",children:[e.jsx(H,{className:"w-4 h-4 mr-3","aria-hidden":"true"}),e.jsxs("span",{children:["Export to JSON",d.name==="json"&&d.status&&"...."]})]})})})]})]}),e.jsx("div",{className:"lg:flex-1 md:flex-1  sm:flex-none",children:e.jsxs(m,{variant:"outline",onClick:()=>C(!f),children:[e.jsx(B,{className:"size-3 text-gray-400"}),e.jsx("span",{className:"text-xs",children:"Import"})]})})]}),f&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full my-2 lg:my-0 md:my-0 flex",children:[e.jsx("div",{className:"h-9 border border-dashed border-emerald-500 rounded-md",children:e.jsxs("label",{className:"w-full rounded-lg h-9 flex justify-center items-center text-xs dark:text-gray-400 leading-none",children:[e.jsx(V,{disabled:N,type:"file",accept:".csv,.xls,.json",onChange:v}),x||e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mx-2 text-emerald-500 text-lg dark:text-gray-400"})," ",p("SelectYourJSON")," ",a," ",p("File")]}),x&&e.jsx("span",{onClick:b,type:"button",className:"text-red-500 focus:outline-none mx-4 text-lg",children:e.jsx(P,{})})]})}),e.jsx("div",{className:"flex ml-2",children:k?e.jsxs(m,{children:[e.jsx("img",{src:O,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsxs(m,{variant:"import",onClick:w,children:[e.jsx("span",{className:"",children:e.jsx(A,{})}),e.jsx("span",{className:"text-sx w-20",children:"Import Now"})]})})]})})]})};export{Q as U};
