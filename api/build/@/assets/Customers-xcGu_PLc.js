import{x as P,j as e,m as R,z as O,r as u,S as Y,y as _,e as U,l as Q}from"./index-BmZ_dwCv.js";import{b as z,n as H,B as I}from"./button-4tHrV-ob.js";import{C as K,a as V}from"./card-z1qiUGvD.js";import{I as J}from"./input-C0BdUGB3.js";import{e as A,C as W}from"./ProductServices-afE79VKB.js";import{e as Z,c as L,f as p,T as $,a as G,b as X,d as h}from"./table-DqTgYDcX.js";import{u as ee}from"./useFilter-_rWokXMj.js";import{N as se}from"./NotFound-DPkmTFlo.js";import{U as ae}from"./UploadMany-J0kUphxL.js";import{d as re,k as te,S as le}from"./Layout-B1bU_74f.js";import{u as q,T as M,D as oe,M as ie}from"./DrawerButton-Cgm6zT_g.js";import{T as ne}from"./Tooltip-Bb6l2jS1.js";import{E as me,D as de}from"./EditDeleteButton-DWncACV1.js";import{T as ce}from"./TableLoading-B5kOxqdm.js";import{P as xe}from"./PageTitle-LqzkoK1q.js";import{A as pe}from"./AnimatedContent-BNKJlQXC.js";import{u as he,E as y}from"./index.esm-DazwP4qc.js";import{I as N}from"./InputArea-l9xTjbBj.js";import{L as C}from"./LabelArea-CDILq1N9.js";import"./index-C148XJoK.js";import"./useDisableForDemo-CWmzrrYY.js";import"./CouponServices-DlRCOaul.js";import"./CurrencyServices-CGhkZaP1.js";import"./exportFromJSON-BvevaQwb.js";import"./spinner-CkndCogW.js";import"./index-CWe8m2Sk.js";import"./SelectLanguageTwo-D8KAIgW8.js";import"./floating-ui.dom-BM6icrOT.js";import"./Combination-v4s5Rmjm.js";import"./tslib.es6-BGws65QO.js";import"./AdminServices-LtusNjKA.js";import"./label-C6IWixiq.js";const ge=({customers:a})=>{const{handleModalOpen:t,handleUpdate:i}=q(),{selectedIds:l}=P();return e.jsx(e.Fragment,{children:e.jsx(Z,{children:a==null?void 0:a.map(s=>{var r;return e.jsxs(L,{children:[e.jsx(p,{children:e.jsx("span",{className:"font-semibold uppercase text-xs",children:(r=s==null?void 0:s._id)==null?void 0:r.substring(20,24)})}),e.jsx(p,{children:e.jsx("span",{className:"text-sm",children:re(s.createdAt).format("MMM D, YYYY")})}),e.jsx(p,{children:e.jsx("span",{className:"text-sm",children:s.name})}),e.jsxs(p,{children:[e.jsx("span",{className:"text-sm",children:s.email})," "]}),e.jsx(p,{children:e.jsx("span",{className:"text-sm font-medium",children:s.phone})}),e.jsx(p,{children:e.jsxs("div",{className:"flex justify-end text-right",children:[e.jsxs("div",{className:"p-2 cursor-pointer text-gray-400 hover:text-emerald-600",children:[" ",e.jsx(R,{to:`/customer-order/${s._id}`,children:e.jsx(ne,{id:"view",Icon:te,title:O("ViewOrder"),bgColor:"#34D399"})})]}),e.jsx(me,{id:s==null?void 0:s._id,title:s.name,selectedIds:l,handleUpdate:i,handleModalOpen:t})]})})]},s._id)})})})},ue=a=>{const[t,i]=u.useState(""),[l,s]=u.useState(!1),{setIsUpdate:r}=u.useContext(Y),{openDrawer:w,closeDrawer:c}=P(),v=_(),{register:S,handleSubmit:j,setValue:x,formState:{errors:g}}=he(),T=async d=>{var f,b;try{s(!0);const o={name:d.name,email:d.email,phone:d.phone,address:d.address};if(a){const F=await A.updateCustomer(a,o);r(!0),z(F.message),c(),v.invalidateQueries(["customers"])}s(!1)}catch(o){H(((b=(f=o==null?void 0:o.response)==null?void 0:f.data)==null?void 0:b.message)||(o==null?void 0:o.message)),c()}},{error:E,isFetched:k,data:m,isLoading:D}=U({queryKey:["customer",a],queryFn:()=>A.getCustomerById(a),staleTime:600*1e3,gcTime:900*1e3,enabled:!!a});return u.useEffect(()=>{k&&a&&(x("name",m.name),x("phone",m.phone),x("email",m.email),x("address",m.address))},[a,m,D]),{register:S,handleSubmit:j,onSubmit:T,errors:g,setImageUrl:i,imageUrl:t,isSubmitting:l}},je=({id:a})=>{const{register:t,handleSubmit:i,onSubmit:l,errors:s,isSubmitting:r}=ue(a);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:a?e.jsx(M,{title:"Update Customer",description:"Update your Customer necessary information from here"}):e.jsx(M,{title:"Add Customer",description:"Add your Customer necessary information from here"})}),e.jsx(le,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:i(l),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(C,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(N,{required:!0,register:t,label:"Name",name:"name",type:"text",placeholder:"Name"}),e.jsx(y,{errorName:s.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(C,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(N,{required:!0,register:t,label:"Email",name:"email",type:"email",placeholder:"Email"}),e.jsx(y,{errorName:s.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(C,{label:"Phone"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(N,{register:t,label:"Phone",name:"phone",type:"text",placeholder:"Phone"}),e.jsx(y,{errorName:s.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(C,{label:"Address"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(N,{register:t,label:"Address",name:"address",type:"text",placeholder:"Address"}),e.jsx(y,{errorName:s.address})]})]})]}),e.jsx(oe,{id:a,title:"Customer",isSubmitting:r})]})})]})},Ze=()=>{const{open:a,setOpen:t,selectedId:i,selectedIds:l}=P(),{title:s}=q(),{data:r,error:w,isFetched:c,isLoading:v}=U({queryKey:["customers"],queryFn:A.getAllCustomers,staleTime:600*1e3,gcTime:900*1e3}),S=u.useMemo(()=>c?r:[],[c,r]),{userRef:j,dataTable:x,serviceData:g,filename:T,isDisabled:E,setSearchUser:k,totalResults:m,resultsPerPage:D,handleSubmitUser:d,handleSelectFile:f,handleChangePage:b,handleUploadMultiple:o,handleRemoveSelectFile:F}=ee(S),{t:n}=Q(),B=()=>{k(""),j.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsx(de,{open:a,title:s,id:i,onOpenChange:()=>t(!1),ids:(l==null?void 0:l.length)>0?l:null}),e.jsx(ie,{children:e.jsx(je,{id:i,data:c?r:[]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between py-4 lg:py-8 gap-4 lg:gap-2",children:[e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx(xe,{children:n("CustomersPage")})}),e.jsx("form",{onSubmit:d,className:"flex flex-col sm:flex-row lg:flex-row gap-2 lg:ml-4",children:e.jsx("div",{className:"w-full sm:w-auto",children:e.jsx(ae,{title:"Customers",exportData:r,filename:T,isDisabled:E,handleSelectFile:f,handleUploadMultiple:o,handleRemoveSelectFile:F})})})]}),e.jsx(pe,{children:e.jsx(K,{className:"min-w-0 shadow-sm overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsxs(V,{className:"p-5",children:[e.jsxs("form",{onSubmit:d,className:"pb-5 flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"w-full sm:flex-1 relative",children:[e.jsx(J,{ref:j,type:"search",name:"search",placeholder:n("CustomersPageSearchPlaceholder"),className:"w-full"}),e.jsx("button",{type:"submit",className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsxs("div",{className:"flex gap-2 sm:flex-shrink-0 sm:min-w-[160px]",children:[e.jsx(I,{type:"submit",className:"h-10 flex-1 sm:min-w-[75px]",variant:"export",children:"Filter"}),e.jsx(I,{variant:"outline",onClick:B,type:"reset",className:"h-10 flex-1 sm:min-w-[75px]",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})]})]}),v?e.jsx(ce,{row:12,col:6,width:190,height:20}):w?e.jsx("span",{className:"text-center mx-auto text-red-500",children:w}):(g==null?void 0:g.length)!==0?e.jsxs("div",{children:[e.jsx($,{className:"mb-4 rounded-b-lg",children:e.jsxs(G,{children:[e.jsx(X,{children:e.jsxs(L,{children:[e.jsx(h,{children:n("CustomersId")}),e.jsx(h,{children:n("CustomersJoiningDate")}),e.jsx(h,{children:n("CustomersName")}),e.jsx(h,{children:n("CustomersEmail")}),e.jsx(h,{children:n("CustomersPhone")}),e.jsx(h,{className:"text-right",children:n("CustomersActions")})]})}),e.jsx(ge,{customers:x})]})}),e.jsx("div",{children:e.jsx(W,{resultsperpage:D,totalresults:m,onChange:b,label:"Table navigation"})})]}):e.jsx(se,{title:"Sorry, There are no customers right now."})]})})})]})};export{Ze as default};
