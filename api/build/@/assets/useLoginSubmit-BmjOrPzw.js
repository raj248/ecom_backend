import{r as p,A as L,q as N,u as O,k as g}from"./index-BmZ_dwCv.js";import{u as w}from"./index.esm-DazwP4qc.js";import{A as t}from"./AdminServices-LtusNjKA.js";import{b as o,n as E}from"./button-4tHrV-ob.js";const J=()=>{const[d,a]=p.useState(!1),{dispatch:i}=p.useContext(L),n=N(),e=O(),{register:S,control:l,handleSubmit:y,formState:{errors:h}}=w();return{control:l,onSubmit:async({name:b,email:r,verifyEmail:x,password:c,role:A})=>{var u,f;a(!0);const m=.5;try{if(e.pathname==="/login"){const s=await t.loginAdmin({email:r,password:c});s&&(o("Login Success!"),i({type:"USER_LOGIN",payload:s}),g.set("adminInfo",JSON.stringify(s),{expires:m,sameSite:"None",secure:!0}),n.replace("/dashboard"))}if(e.pathname==="/signup"){const s=await t.registerAdmin({name:b,email:r,password:c,role:A});s&&(o("Register Success!"),i({type:"USER_LOGIN",payload:s}),g.set("adminInfo",JSON.stringify(s),{expires:m,sameSite:"None",secure:!0}),n.replace("/"))}if(e.pathname==="/forgot-password"){const s=await t.forgetPassword({verifyEmail:x});o(s.message)}}catch(s){E(((f=(u=s==null?void 0:s.response)==null?void 0:u.data)==null?void 0:f.message)||(s==null?void 0:s.message))}finally{a(!1)}},register:S,handleSubmit:y,errors:h,loading:d}};export{J as u};
