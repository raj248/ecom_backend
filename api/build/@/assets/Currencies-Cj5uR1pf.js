import{r as g,S as O,x as A,y as P,j as e,z as l}from"./index-lrQuldHs.js";import{n as E,b as B,B as k}from"./button-rh3FTULs.js";import{C as q,a as H}from"./card-w6jK4kZ9.js";import{I as Q}from"./input-DxgA4gbo.js";import"./ProductServices-DkrntO0G.js";import{e as R,c as L,f as j,T as z,a as V,b as W,d as f}from"./table-pH1NcXB9.js";import{l as G,e as J,f as K,g as X}from"./Layout-zjBccTHe.js";import{u as Y}from"./useAsync-BoRl3kkI.js";import{u as Z}from"./useFilter-CTY6t_y8.js";import{C as U,S as $,B as ee}from"./ShowHideButton-B5Ky8xjG.js";import{T as F,D as se,u as _,M as ae}from"./DrawerButton-CHM5Wu-i.js";import{u as re,E as I}from"./index.esm-BUE4Z1sU.js";import{I as M}from"./InputArea-C6cF93jC.js";import{L as T}from"./LabelArea-CL5vBgQk.js";import{S as te}from"./SwitchToggle-BZHbvCGz.js";import{C}from"./CurrencyServices-BtWGRbQW.js";import{E as le,D as ne}from"./EditDeleteButton-BFQAVewg.js";import{P as ie}from"./PageTitle-DEDGWyYG.js";import{T as oe}from"./TableLoading-BpKh234J.js";import{N as ce}from"./NotFound-DffgNZ-O.js";import{A as me}from"./AnimatedContent-DSnt0TWS.js";import"./index-C148XJoK.js";import"./index-BOuINoA5.js";import"./useDisableForDemo-dHOka9Cq.js";import"./CouponServices-DZWPN_Z6.js";import"./ParentCategory-DqAAqud_.js";import"./Tooltip-D68gOM7t.js";import"./floating-ui.dom-BM6icrOT.js";import"./select-7doUwPnS.js";import"./Combination-DMBpnunk.js";import"./tslib.es6-BGws65QO.js";import"./textarea-CE3Qtp6r.js";import"./index.prod-Ca2g6A5e.js";import"./SelectLanguageTwo-CEDNWkHE.js";import"./spinner-CkndCogW.js";import"./label-D0mdihLM.js";import"./AdminServices-B69j88RY.js";const de=s=>{const[o,n]=g.useState(!0),[r,i]=g.useState(!1),{setIsUpdate:a}=g.useContext(O),{openDrawer:h,closeDrawer:d}=A(),b=P(),{handleSubmit:w,register:p,setValue:m,clearErrors:x,formState:{errors:N}}=re(),S=async({symbol:u,name:y})=>{var t,D;try{i(!0);const c={name:y,symbol:u,status:o?"show":"hide"};if(s){const v=await C.updateCurrency(s,c);a(!0),i(!1),B(v.message),d(),b.invalidateQueries(["currencies"])}else{const v=await C.addCurrency(c);a(!0),i(!1),B(v.message),d(),b.invalidateQueries(["currencies"])}}catch(c){i(!1),E(((D=(t=c==null?void 0:c.response)==null?void 0:t.data)==null?void 0:D.message)||(c==null?void 0:c.message)),d()}};return g.useEffect(()=>{if(!s){m("name"),m("symbol"),n(!0),x("symbol"),x("name");return}},[x,s,h,m]),g.useEffect(()=>{s&&(async()=>{var u,y;try{const t=await C.getCurrencyById(s);t&&(m("name",t.name),m("symbol",t.symbol),n(t.status==="show"))}catch(t){E(((y=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:y.message)||(t==null?void 0:t.message))}})()},[s]),{errors:N,onSubmit:S,register:p,status:o,setStatus:n,isSubmitting:r,handleSubmit:w}},xe=({id:s})=>{const{errors:o,onSubmit:n,register:r,status:i,setStatus:a,isSubmitting:h,handleSubmit:d}=de(s);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:s?e.jsx(F,{title:l("UpdateCurrency"),description:l("UpdateCurrencyText")}):e.jsx(F,{title:l("AddCurrency"),description:l("AddCurrencyText")})}),e.jsx(G.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:d(n),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:l("CurrenciesName")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(M,{required:!0,register:r,label:"Name",name:"name",type:"text",placeholder:"Name"}),e.jsx(I,{errorName:o.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:l("CurrenciesSymbol")}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(M,{required:!0,register:r,label:"Symbol",name:"symbol",type:"text",placeholder:"Symbol"}),e.jsx(I,{errorName:o.symbol})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(T,{label:l("CurrenciesEnabled")}),e.jsx("div",{className:"col-span-8 sm:col-span-1 text-align-left",children:e.jsx(te,{processOption:i,handleProcess:a})})]})]}),e.jsx(se,{id:s,title:"Currency",isSubmitting:h})]})})]})},ue=({currency:s})=>{const{handleModalOpen:o,handleUpdate:n}=_(),{handleSelect:r,selectedIds:i}=A();return e.jsx(e.Fragment,{children:e.jsx(R,{children:s==null?void 0:s.map(a=>e.jsxs(L,{children:[e.jsx(j,{children:e.jsx(U,{type:"checkbox",name:a.symbol,id:a._id,handleSelect:r,isChecked:i.includes(a._id)})}),e.jsx(j,{className:"text-center",children:e.jsx("span",{className:"font-medium text-sm",children:a.name})}),e.jsx(j,{className:"text-center",children:e.jsx("span",{className:"font-medium text-sm",children:a.symbol})}),e.jsx(j,{className:"text-center",children:e.jsx($,{id:a._id,status:a.status,currencyStatusName:"status"})}),e.jsx(j,{children:e.jsx(le,{title:a.name,id:a._id,handleUpdate:n,handleModalOpen:o})})]},a._id))})})},Ye=()=>{const{open:s,setOpen:o,selectedId:n,selectedIds:r,isCheckAll:i,toggleDrawer:a,handleSelectAll:h}=A(),{title:d,handleDeleteMany:b,handleUpdateMany:w}=_(),{data:p,loading:m,error:x}=Y(C.getAllCurrency),{dataTable:N,currencyRef:S,handleSubmitCurrency:u}=Z(p);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between py-4 lg:py-8 gap-4 lg:gap-2",children:[e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx(ie,{children:"Currencies"})}),e.jsx("form",{onSubmit:u,className:"flex flex-col sm:flex-row lg:flex-row gap-2 lg:ml-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(k,{disabled:r.length<1,onClick:()=>w(r),variant:"bulkAction",className:"w-full sm:w-auto",children:[e.jsx("span",{children:e.jsx(J,{})}),"Bulk Action"]}),e.jsxs(k,{disabled:r.length<1,onClick:()=>b(r),variant:"delete",className:"w-full sm:w-auto",children:[e.jsx("span",{children:e.jsx(K,{})}),"Delete"]}),e.jsxs(k,{onClick:a,variant:"create",className:"w-full sm:w-auto",children:[e.jsx("span",{children:e.jsx(X,{})}),"Add Currency"]})]})})]}),e.jsx(ee,{ids:r,title:"Currencies"}),e.jsx(ae,{children:e.jsx(xe,{id:n})}),e.jsx(ne,{open:s,title:d,id:n,onOpenChange:()=>o(!1),ids:(r==null?void 0:r.length)>0?r:null}),e.jsx(me,{children:e.jsx(q,{className:"min-w-0 shadow-sm overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsxs(H,{className:"p-5",children:[e.jsx("form",{onSubmit:u,className:"pb-5 flex flex-col sm:flex-row gap-3 sm:gap-4",children:e.jsxs("div",{className:"w-full sm:flex-1 relative",children:[e.jsx(Q,{ref:S,type:"search",placeholder:l("SearchIsoCode"),className:"w-full"}),e.jsx("button",{type:"submit",className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),m?e.jsx(oe,{row:12,col:7,width:163,height:20}):x?e.jsx("span",{className:"text-center mx-auto text-red-500",children:x}):p.length!==0&&e.jsx("div",{children:e.jsx(z,{className:"mb-8 rounded-b-lg",children:e.jsxs(V,{children:[e.jsx(W,{children:e.jsxs(L,{children:[e.jsx(f,{children:e.jsx(U,{type:"checkbox",name:"selectAll",id:"selectAll",isChecked:i,handleSelect:()=>h(p)})}),e.jsx(f,{className:"text-center",children:l("CurrenciesName")}),e.jsx(f,{className:"text-center",children:l("CurrenciesSymbol")}),e.jsx(f,{className:"text-center",children:l("CurrenciesEnabled")}),e.jsx(f,{className:"text-right",children:l("CurrenciesActions")})]})}),e.jsx(ue,{currency:N})]})})}),!m&&p.length===0&&!x&&e.jsx(ce,{title:"Sorry, There are no currency right now."})]})})})]})};export{Ye as default};
