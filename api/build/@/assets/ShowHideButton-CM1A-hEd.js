import{j as e,r as b,u as ee,S as se,x as ae,y as te,L as re}from"./index-BmZ_dwCv.js";import{P as me,M as ue,R as he,T as Y}from"./ParentCategory-gD9tabZx.js";import{b as g,n as M,B as G}from"./button-4tHrV-ob.js";import{I as H}from"./input-C0BdUGB3.js";import"./select-B6txXpwi.js";import{a as xe,T as fe}from"./DrawerButton-Cgm6zT_g.js";import{u as be,m as je,l as ye}from"./Layout-B1bU_74f.js";import{u as ve,E as I}from"./index.esm-DazwP4qc.js";import{L as p}from"./LabelArea-CDILq1N9.js";import{S as k}from"./SwitchToggle-BjyUJm8q.js";import{T as we}from"./textarea-CEbUnO4R.js";import{u as Ce}from"./useDisableForDemo-CWmzrrYY.js";import{P as le,b as ne,A as $}from"./ProductServices-afE79VKB.js";import{C as K}from"./CouponServices-DlRCOaul.js";import{C as W}from"./CurrencyServices-CGhkZaP1.js";import{a as Se}from"./index.prod-DYWWLFcb.js";const Ve=({id:n,name:l,type:j,handleSelect:v,isChecked:d})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:n,name:l,type:j,onChange:v,checked:d})}),Z=({register:n,name:l,label:j,placeholder:v,required:d,type:o,value:r})=>e.jsx(e.Fragment,{children:e.jsx(we,{...n(`${l}`,{required:d?`${j} is required!`:!1}),type:o,placeholder:v,name:l,value:r,rows:"4",spellCheck:"false"})}),Ne=(n,l)=>{const[j,v]=b.useState(""),[d,o]=b.useState([]),r=ee(),[P,h]=b.useState(""),[x,f]=b.useState(!0),[a,i]=b.useState(!0),[w,O]=b.useState([]),[Q,R]=b.useState([]),[z,C]=b.useState(!1),[L,U]=b.useState(""),{setIsUpdate:N}=b.useContext(se),{openBulkAction:D,setOpenBulkAction:A}=ae(),S=()=>A(!D),V=te(),{handleDisableForDemo:B}=Ce(),{watch:E,setValue:c,register:q,handleSubmit:s,clearErrors:t,formState:{errors:u}}=ve(),F=async y=>{var _,J,X;if(!B())try{const T={ids:n,categories:w==null?void 0:w.map(m=>m._id),category:(_=Q[0])==null?void 0:_._id,productType:[z?"food":"others"],show:y.show,status:x?"show":"hide",tag:JSON.stringify(d)},ie={ids:n,status:x?"show":"hide"},oe={ids:n,enabled:x?"show":"hide",live_exchange_rates:a?"show":"hide"},ce={ids:n,parentId:P,description:y.description,parentName:L,status:x?"show":"hide"},de={ids:n,option:y.option,status:x?"show":"hide"},pe={ids:n,currentId:l,changeId:y.groupName,status:x?"show":"hide"},ge={ids:n,startTime:y.startTime,endTime:y.endTime,status:x?"show":"hide"};if(r.pathname==="/products"){const m=await le.updateManyProducts(T);N(!0),g(m.message),S()}if(r.pathname==="/coupons"){const m=await K.updateManyCoupons(ge);N(!0),g(m.message),S()}if(r.pathname==="/languages"){const m=await re.updateManyLanguage(ie);N(!0),g(m.message),S()}if(r.pathname==="/currencies"){const m=await W.updateManyCurrencies(oe);N(!0),g(m.message),S()}if(r.pathname==="/categories"||r.pathname===`/categories/${l}`){const m=await ne.updateManyCategory(ce);N(!0),g(m.message),S()}if(r.pathname==="/attributes"){const m=await $.updateManyAttribute(de);V.invalidateQueries(["attributes"]),g(m.message),S()}if(r.pathname===`/attributes/${r.pathname.split("/")[2]}`){const m=await $.updateManyChildAttribute(pe);N(!0),g(m.message),S()}}catch(T){M(((X=(J=T==null?void 0:T.response)==null?void 0:J.data)==null?void 0:X.message)||(T==null?void 0:T.message))}};return b.useEffect(()=>{if(!D){c("parent"),c("children"),c("type"),c("show"),c("name"),v(""),o([]),t("parent"),t("children"),t("type"),t("name"),c("name"),c("iso_code"),c("call_prefix"),c("currency"),c("zone"),t("name"),t("iso_code"),t("call_prefix"),t("currency"),t("zone"),t("status"),c("name"),c("iso_code"),c("country"),c("zone"),c("description"),t("name"),t("iso_code"),t("country"),t("zone"),t("status"),t("show"),t("description"),R([]),O([]);return}},[c,D,t]),b.useEffect(()=>{v(E("children"))},[E,j]),{register:q,watch:E,handleSubmit:s,onSubmit:F,errors:u,tag:d,setTag:o,published:x,setPublished:f,published2:a,setPublished2:i,checked:P,setChecked:h,selectedCategory:w,setSelectedCategory:O,defaultCategory:Q,setDefaultCategory:R,selectCategoryName:L,setSelectCategoryName:U,isFoodItem:z,setIsFoodItem:C}},qe=({ids:n,title:l,data:j,childId:v,attributes:d})=>{const{openBulkAction:o,setOpenBulkAction:r}=ae(),{showingTranslateValue:P}=be(),{tag:h,setTag:x,published:f,register:a,onSubmit:i,errors:w,checked:O,setChecked:Q,resetRefTwo:R,handleSubmit:z,setPublished:C,selectedCategory:L,setSelectedCategory:U,defaultCategory:N,setDefaultCategory:D,selectCategoryName:A,setSelectCategoryName:S}=Ne(n,v),V={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},B=s=>{let t=[];for(let u of s)t.push({title:P(u==null?void 0:u.name),key:u._id,children:u.children.length>0&&B(u.children)});return t},E=(s,t)=>{var u;return s._id===t?s:(u=s==null?void 0:s.children)==null?void 0:u.reduce((F,y)=>F??E(y,t),void 0)},c=s=>{var u,F;const t=n==null?void 0:n.find(y=>y===s);if((n==null?void 0:n.length)===((F=(u=j[0])==null?void 0:u.children)==null?void 0:F.length))return M("This can't be select as a parent category!");if(t!==void 0)return M("This can't be select as a parent category!");if(s===v)return M("This can't be select as a parent category!");{if(s===void 0)return;Q(s);const y=j[0],_=E(y,s);S(P(_==null?void 0:_.name))}},q=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return o?e.jsx(e.Fragment,{children:e.jsxs(xe,{parent:null,level:null,open:o,onClose:()=>r(!1),placement:"right",children:[e.jsx("button",{onClick:()=>r(!o),className:"absolute z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(je,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(fe,{title:`Update Selected ${l}`,description:`Apply changes to the selected ${l} from the list`})}),e.jsx(ye.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:z(i),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[l==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(me,{selectedCategory:L,setSelectedCategory:U,setDefaultCategory:D})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ue,{displayValue:"name",isObject:!0,singleSelect:!0,ref:R,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>D(s),selectedValues:N,options:L,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k,{handleProcess:C,processOption:f}),e.jsx(I,{errorName:w.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(he,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:h,onChange:s=>x(s)})})]})]}),l==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(H,{...a("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time"}),e.jsx(I,{errorName:w.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(H,{...a("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time"}),e.jsx(I,{errorName:w.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k,{handleProcess:C,processOption:f}),e.jsx(I,{errorName:w.published})]})]})]}),l==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:f,handleProcess:C})})]})}),l==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:f,handleProcess:C})})]})}),l==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{register:a,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(I,{errorName:w.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(H,{readOnly:!0,...a("parent",{required:!1}),name:"parent",value:A||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:q}}),e.jsx(Y,{treeData:B(j),selectedKeys:[O],onSelect:s=>c(s[0]),motion:V,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:f,handleProcess:C})})]})]}),l==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{register:a,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(I,{errorName:w.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(H,{readOnly:!0,...a("parent",{required:!1}),name:"parent",value:A||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:q}}),e.jsx(Y,{treeData:B(j),selectedKeys:[O],onSelect:s=>c(s[0]),motion:V,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:f,handleProcess:C})})]})]}),l==="Attributes"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:f,handleProcess:C})})]})}),l==="Attribute Value(s)"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(p,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(k,{title:"",processOption:f,handleProcess:C})})]})})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(G,{onClick:()=>r(!o),variant:"outline",className:"w-full",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(G,{type:"submit",className:"w-full",children:["Bulk Update ",l]})})]})]})})]})]})}):null},He=({id:n,status:l,category:j,currencyStatusName:v})=>{const d=ee(),{setIsUpdate:o}=b.useContext(se),r=te(),P=async h=>{var x,f;try{let a;if(l==="show"?a="hide":a="show",d.pathname==="/categories"||j){const i=await ne.updateStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["categories"])}if(d.pathname==="/products"){const i=await le.updateStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["products"])}if(d.pathname==="/languages"){const i=await re.updateStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["languages"])}if(d.pathname==="/currencies")if(v==="status"){const i=await W.updateEnabledStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["currencies"])}else{const i=await W.updateLiveExchangeRateStatus(h,{live_exchange_rates:a});o(!0),g(i.message)}if(d.pathname==="/attributes"){const i=await $.updateStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["attributes"])}if(d.pathname===`/attributes/${d.pathname.split("/")[2]}`){const i=await $.updateChildStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["attribute"])}if(d.pathname==="/coupons"){const i=await K.updateStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["coupons"])}if(d.pathname==="/our-staff"){const i=await K.updateStaffStatus(h,{status:a});o(!0),g(i.message),r.invalidateQueries(["our-staff"])}}catch(a){M(a?(f=(x=a==null?void 0:a.response)==null?void 0:x.data)==null?void 0:f.message:a==null?void 0:a.message)}};return e.jsx(Se,{onChange:()=>P(n),checked:l==="show",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})};export{qe as B,Ve as C,He as S,Z as T};
