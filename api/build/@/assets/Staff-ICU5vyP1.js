import{i as M,l as I,j as e,r as A,S as B,A as O,x as Z}from"./index-BmZ_dwCv.js";import{n as D,b as _,B as y}from"./button-4tHrV-ob.js";import{C as R,a as P}from"./card-z1qiUGvD.js";import{I as E}from"./input-C0BdUGB3.js";import{d as q}from"./ProductServices-afE79VKB.js";import{S as H,a as J,b as V,c as $,d as f}from"./select-B6txXpwi.js";import{e as W,c as F,f as g,T as G,a as K,b as Q,d as j}from"./table-DqTgYDcX.js";import{o as z,l as X,r as Y,u as ee,A as se,i as ae,j as le,k as te,g as re}from"./Layout-B1bU_74f.js";import{u as ie}from"./useAsync-xcASmSVa.js";import{u as ne}from"./useFilter-_rWokXMj.js";import{T as k,D as oe,u as L,M as ce}from"./DrawerButton-Cgm6zT_g.js";import{j as de}from"./index-BdrnRTgM.js";import{E as w}from"./index.esm-DazwP4qc.js";import{I as v}from"./InputArea-l9xTjbBj.js";import{u as me}from"./useStaffSubmit-DU_4PqGX.js";import{S as xe}from"./SelectRole-Ce3RKeY_.js";import{L as u}from"./LabelArea-CDILq1N9.js";import{U as pe}from"./Uploader-CWHO3hsY.js";import{T as he}from"./TableLoading-B5kOxqdm.js";import{S as ge}from"./Status-BNefd5c1.js";import{T as je}from"./Tooltip-Bb6l2jS1.js";import{a as ue,b as be,c as Ne,d as Se,e as we,E as ve,D as fe}from"./EditDeleteButton-DWncACV1.js";import{a as ye}from"./index.prod-DYWWLFcb.js";import{A as U}from"./AdminServices-LtusNjKA.js";import{N as Ae}from"./NotFound-DPkmTFlo.js";import{P as Ce}from"./PageTitle-LqzkoK1q.js";import{A as Te}from"./AnimatedContent-BNKJlQXC.js";import"./index-C148XJoK.js";import"./Combination-v4s5Rmjm.js";import"./index-CWe8m2Sk.js";import"./tslib.es6-BGws65QO.js";import"./floating-ui.dom-BM6icrOT.js";import"./useDisableForDemo-CWmzrrYY.js";import"./CouponServices-DlRCOaul.js";import"./CurrencyServices-CGhkZaP1.js";import"./SelectLanguageTwo-D8KAIgW8.js";import"./spinner-CkndCogW.js";import"./useTranslationValue-BbCbvZPg.js";import"./label-C6IWixiq.js";import"./_commonjs-dynamic-modules-dt42qxfv.js";const De=({id:n})=>{const{role:o}=z(),{theme:t}=M(),{language:d,control:m,register:r,handleSubmit:c,onSubmit:x,errors:i,imageUrl:p,setImageUrl:h,isSubmitting:a,selectedDate:b,setSelectedDate:s,accessedRoutes:S,setAccessedRoutes:C,handleSelectLanguage:l}=me(n),{t:N}=I();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:n?e.jsx(k,{register:r,language:d,handleSelectLanguage:l,title:N("UpdateStaff"),description:N("UpdateStaffdescription")}):e.jsx(k,{register:r,language:d,handleSelectLanguage:l,title:N("AddStaffTitle"),description:N("AddStaffdescription")})}),e.jsx(X.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(R,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(P,{className:"p-6",children:e.jsxs("form",{onSubmit:c(x),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Staff Image"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(pe,{folder:"admin",targetWidth:238,targetHeight:238,imageUrl:p,setImageUrl:h})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(v,{required:!0,register:r,label:"Name",name:"name",type:"text",autoComplete:"username",placeholder:"Staff name"}),e.jsx(w,{errorName:i.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(v,{required:!0,register:r,label:"Email",name:"email",type:"text",autoComplete:"username",pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,placeholder:"Email"}),e.jsx(w,{errorName:i.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Password"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[n?e.jsx(v,{register:r,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}):e.jsx(v,{required:!0,register:r,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}),e.jsx(w,{errorName:i.password})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Contact Number"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(v,{required:!0,register:r,label:"Contact Number",name:"phone",pattern:/^[+]?\d*$/,minLength:6,maxLength:15,type:"text",placeholder:"Phone number"}),e.jsx(w,{errorName:i.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Joining Date"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(E,{onChange:T=>s(T.target.value),label:"Joining Date",name:"joiningDate",value:b,type:"date",placeholder:N("StaffJoiningDate")}),e.jsx(w,{errorName:i.joiningDate})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Staff Role"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(xe,{label:"Role",name:"role",control:m})})]}),o==="admin"||o==="super admin"&&e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(u,{label:"Select Routes to given Access"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(de,{options:Y,value:S,className:t,onChange:T=>C(T),labelledBy:"Select Coupon"})})]})]}),e.jsx(oe,{id:n,title:"Staff",zIndex:"z-5",isSubmitting:a})]})})})})]})},ke=({id:n,status:o,option:t,staff:d})=>{const{setIsUpdate:m}=A.useContext(B),{role:r}=z(),c=async(x,i)=>{var p,h;if((i==null?void 0:i.email)==="admin@gmail.com")return D("Updating Default admin disabled for demo!");if(!(r==="super admin"||r==="admin"))return D("Only Super Admin and Admin can enable/disable any staff!");try{let a;o==="active"?a="inactive":a="active";const b=await U.updateStaffStatus(x,{status:a});m(!0),_(b.message);return}catch(a){D(a?(h=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:h.message:a==null?void 0:a.message)}};return e.jsx(e.Fragment,{children:e.jsx(ye,{onChange:()=>c(n,d),checked:o==="active",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})})},Ie=({isOpen:n,onClose:o,staff:t,showingTranslateValue:d})=>{var m,r;return e.jsx(ue,{open:n,onOpenChange:o,children:e.jsxs(be,{children:[e.jsx(Ne,{children:e.jsxs(Se,{className:"text-xl font-medium text-center pb-6 dark:text-gray-300",children:["List of route access for"," ",e.jsx("span",{className:"text-emerald-600",children:d(t==null?void 0:t.name)})]})}),((m=t==null?void 0:t.access_list)==null?void 0:m.length)>0?e.jsx("ol",{className:"list-disc pl-5",children:(r=t==null?void 0:t.access_list)==null?void 0:r.map((c,x)=>e.jsx("li",{className:"text-sm text-gray-700 dark:text-gray-300 capitalize",children:c},x))}):e.jsx("p",{className:"text-orange-500 py-10 text-lg text-center",children:"This staff not have any route access!"}),e.jsx(we,{className:"justify-end",children:e.jsx(y,{className:"w-full sm:w-auto bg-red-400 text-white hover:bg-red-500",variant:"destructive",onClick:o,children:"Close"})})]})})},Re=({staffs:n})=>{const{handleModalOpen:o,handleUpdate:t,isSubmitting:d,handleResetPassword:m}=L(),{showDateFormat:r,showingTranslateValue:c}=ee(),[x,i]=A.useState(null),[p,h]=A.useState(!1),a=s=>{i(s),h(!0)},b=()=>{i(null),h(!1)};return e.jsxs(e.Fragment,{children:[p&&e.jsx(Ie,{staff:x,isOpen:p,onClose:b,showingTranslateValue:c}),e.jsx(W,{children:n==null?void 0:n.map(s=>{var S;return e.jsxs(F,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(se,{className:"hidden mr-3 md:block bg-gray-50",children:[e.jsx(ae,{src:s.image,alt:"staff"}),e.jsx(le,{children:((S=s.name)==null?void 0:S[0])||"S"})]}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:c(s==null?void 0:s.name)})})]})}),e.jsxs(g,{children:[e.jsx("span",{className:"text-sm",children:s.email})," "]}),e.jsx(g,{children:e.jsx("span",{className:"text-sm ",children:s.phone})}),e.jsx(g,{children:e.jsx("span",{className:"text-sm",children:r(s.joiningData)})}),e.jsx(g,{children:e.jsx("span",{className:"text-sm font-semibold capitalize",children:s==null?void 0:s.role})}),e.jsx(g,{className:"text-center text-xs",children:e.jsx(ge,{status:s.status})}),e.jsx(g,{className:"text-center",children:e.jsx(ke,{id:s==null?void 0:s._id,staff:s,option:"staff",status:s.status})}),e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>a(s),className:"text-gray-400",children:e.jsx(je,{id:"view",Icon:te,title:"View Access Route",bgColor:"#059669"})}),e.jsx(ve,{id:s._id,staff:s,isSubmitting:d,handleUpdate:t,handleModalOpen:o,handleResetPassword:m,title:c(s==null?void 0:s.name)})]})})]},s._id)})})]})},bs=()=>{const{state:n}=A.useContext(O),{adminInfo:o}=n,{selectedId:t,toggleDrawer:d}=Z(),{title:m}=L(),{data:r,loading:c,error:x}=ie(()=>U.getAllStaff({email:o.email})),{userRef:i,setRole:p,dataTable:h,serviceData:a,totalResults:b,resultsPerPage:s,handleChangePage:S,handleSubmitUser:C}=ne(r),{t:l}=I(),N=()=>{p(""),i.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between py-4 lg:py-8 gap-4 lg:gap-2",children:[e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs(Ce,{children:[l("StaffPageTitle")," "]})}),e.jsx("div",{className:"flex flex-col sm:flex-row lg:flex-row gap-2 lg:ml-4",children:e.jsx("div",{className:"w-full sm:w-auto",children:e.jsxs(y,{onClick:d,variant:"create",children:[e.jsx("span",{className:"mr-1",children:e.jsx(re,{})}),l("AddStaff")]})})})]}),e.jsx(ce,{children:e.jsx(De,{id:t})}),e.jsx(fe,{id:t,title:m}),e.jsx(Te,{children:e.jsx(R,{className:"min-w-0 shadow-sm overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsxs(P,{className:"p-5",children:[e.jsxs("form",{onSubmit:C,className:"pb-5 flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"w-full sm:flex-1 relative",children:[e.jsx(E,{ref:i,type:"search",name:"search",placeholder:l("StaffSearchBy"),className:"w-full"}),e.jsx("button",{type:"submit",className:"absolute right-1 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsx("div",{className:"w-full sm:flex-1",children:e.jsxs(H,{onValueChange:()=>p(),className:"w-full",children:[e.jsx(J,{children:e.jsx(V,{placeholder:l("StaffRole")})}),e.jsxs($,{children:[e.jsx(f,{value:"All",children:"All"}),e.jsx(f,{value:"admin",children:l("StaffRoleAdmin")}),e.jsx(f,{value:"cashier",children:l("SelectCashiers")}),e.jsx(f,{value:"super admin",children:l("SelectSuperAdmin")})]})]})}),e.jsxs("div",{className:"flex gap-2 sm:flex-shrink-0 sm:min-w-[160px]",children:[e.jsx(y,{type:"submit",className:"h-10 flex-1 sm:min-w-[75px]",variant:"export",children:"Filter"}),e.jsx(y,{className:"h-10 flex-1 sm:min-w-[75px]",layout:"outline",onClick:N,type:"reset",children:"Reset"})]})]}),c?e.jsx(he,{row:12,col:7,width:163,height:20}):x?e.jsx("span",{className:"text-center mx-auto text-red-500",children:x}):(a==null?void 0:a.length)!==0?e.jsxs("div",{children:[e.jsx(G,{className:"mb-8 rounded-b-lg",children:e.jsxs(K,{children:[e.jsx(Q,{children:e.jsxs(F,{children:[e.jsx(j,{children:l("StaffNameTbl")}),e.jsx(j,{children:l("StaffEmailTbl")}),e.jsx(j,{children:l("StaffContactTbl")}),e.jsx(j,{children:l("StaffJoiningDateTbl")}),e.jsx(j,{children:l("StaffRoleTbl")}),e.jsx(j,{className:"text-center",children:l("OderStatusTbl")}),e.jsx(j,{className:"text-center",children:l("PublishedTbl")}),e.jsx(j,{className:"text-center",children:l("StaffActionsTbl")})]})}),e.jsx(Re,{staffs:h})]})}),e.jsx("div",{children:e.jsx(q,{resultsperpage:s,totalresults:b,onChange:S,label:"Table navigation"})})]}):e.jsx(Ae,{title:"Sorry, There are no staff right now."})]})})})]})};export{bs as default};
